<style>
    :root {
        --primary-color: #4CAF50;
        --secondary-color: #2196F3;
        --accent-color: #8bc34a;
        --dark-color: #2E7D32;
        --light-color: #f9f9f9;
        --text-color: #333;
        --white: #ffffff;
        --shadow: 0 4px 12px rgba(0,0,0,0.15);
        --error-color: #f44336;
        --warning-color: #ff9800;
        --success-color: #4caf50;
        --bengali-font-size: 16px;
        --arabic-font-size: 22px;
        --arabic-font-family: 'KFGQPC Uthmanic Script HAFS', 'Traditional Arabic', 'Arial Unicode MS', sans-serif;
    }

    /* ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
    }

    .button-container {
        display: flex;
        gap: 4px;
        flex-shrink: 0;
    }

    /* ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ï */
    .bengali-text, #fullscreen-tafsir-title, .surah-btn, .feedback-form {
        font-family: 'SolaimanLipi', 'Bangla', 'Siyam Rupali', 'Arial Unicode MS', sans-serif;
        font-weight: normal;
        line-height: 1.6;
        word-spacing: normal;
        letter-spacing: normal;
        font-size: var(--bengali-font-size);
    }
    
    /* ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ï */
    .arabic-ayat {
        font-family: var(--arabic-font-family);
        line-height: 2;
        font-size: var(--arabic-font-size);
    }

    /* ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶¨‡¶ü ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® */
    #chatbot-toggle {
        position: fixed;
        bottom: 25px;
        left: 25px;
        background: var(--primary-color);
        color: var(--white);
        padding: 18px;
        border: none;
        border-radius: 50%;
        font-size: 22px;
        cursor: pointer;
        z-index: 1000;
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #chatbot-toggle:hover {
        background: var(--dark-color);
        transform: scale(1.1);
    }

    /* ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶¨‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
    #chatbot-container {
        position: fixed;
        bottom: 90px;
        left: 25px;
        width: 420px;
        max-height: 600px;
        background: var(--white);
        border-radius: 12px;
        box-shadow: var(--shadow);
        display: none;
        overflow: hidden;
        z-index: 1000;
        flex-direction: column;
        transition: all 0.3s ease;
        border: 1px solid #e0e0e0;
    }

    /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    #chatbot-header {
        background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
        color: var(--white);
        padding: 16px;
        font-size: 18px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    /* ‡¶¨‡¶°‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    #chatbot-body {
        flex: 1;
        overflow-y: auto;
        padding: 16px;
        background: var(--light-color);
        height: 400px;
        scroll-behavior: smooth;
    }

    /* ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
    #chatbot-input-container {
        display: flex;
        padding: 4px;
        background: var(--white);
        border-top: 1px solid #eee;
        align-items: center;
        flex-wrap: nowrap;
        gap: 6px;
    }

    #chatbot-input {
        flex: 1;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 8px;
        outline: none;
        font-size: 14px;
        transition: border 0.3s;
        min-width: 200px;
    }

    #chatbot-input:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
    }

    /* ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    .btn {
        background: var(--primary-color);
        color: var(--white);
        border: none;
        padding: 12px 16px;
        margin-left: 8px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .btn:hover {
        background: var(--dark-color);
    }

    .btn-secondary {
        background: var(--secondary-color);
    }

    .btn-secondary:hover {
        background: #1565c0;
    }

    .btn-accent {
        background: var(--accent-color);
    }

    .btn-accent:hover {
        background: #689f38;
    }

    .btn-danger {
        background: var(--error-color);
    }

    .btn-danger:hover {
        background: #d32f2f;
    }

    .notification-badge {
        position: absolute;
        top: -10px;
        right: -10px;
        background: #f44336;
        color: white;
        border-radius: 50%;
        width: 22px;
        height: 22px;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-family: 'SolaimanLipi', sans-serif;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }

    /* ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    .message {
        margin-bottom: 12px;
        padding: 12px;
        border-radius: 8px;
        max-width: 90%;
        word-wrap: break-word;
        line-height: 1.5;
        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .message.user {
        background: #e3f2fd;
        margin-left: auto;
        border-bottom-right-radius: 4px;
    }

    .message.bot {
        background: var(--white);
        margin-right: auto;
        border-bottom-left-radius: 4px;
        border: 1px solid #eee;
    }

    .message.error {
        background-color: #ffebee;
        border-left: 4px solid var(--error-color);
    }

    .message.warning {
        background-color: #fff8e1;
        border-left: 4px solid var(--warning-color);
    }

    .message.success {
        background-color: #e8f5e9;
        border-left: 4px solid var(--success-color);
    }

    /* ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    .arabic-ayat {
        text-align: right;
        direction: rtl;
        padding: 12px;
        background: #f5f5f5;
        border-radius: 8px;
        margin: 12px 0;
        line-height: 1.8;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    /* ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
    .tafsir-container {
        background: #fffde7;
        padding: 16px;
        border-radius: 8px;
        margin-top: 12px;
        border-left: 4px solid #fbc02d;
        line-height: 1.6;
    }

    /* ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ */
    #fullscreen-tafsir {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--white);
        z-index: 3000;
        padding: 30px;
        overflow-y: auto;
    }

    #fullscreen-tafsir-content {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    #fullscreen-tafsir-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
    }

    #fullscreen-tafsir-title {
        font-size: 22px;
        font-weight: bold;
        color: var(--primary-color);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 80%;
    }

    /* ‡¶ï‡ßÅ‡¶á‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® */
    .quick-actions {
        display: flex;
        justify-content: space-between;
        margin: 12px 0;
        gap: 8px;
        flex-wrap: wrap;
    }

    .quick-action-btn {
        background: var(--secondary-color);
        color: var(--white);
        border: none;
        padding: 10px 12px;
        border-radius: 8px;
        cursor: pointer;
        flex: 1;
        transition: all 0.3s;
        font-size: 13px;
        text-align: center;
        min-width: 120px;
    }

    .quick-action-btn:hover {
        background: #1565C0;
    }

    /* ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞ */
    .loading-spinner {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 3px solid rgba(255,255,255,0.3);
        border-radius: 50%;
        border-top-color: var(--white);
        animation: spin 1s ease-in-out infinite;
        margin-left: 8px;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* ‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞ */
    .typing-indicator {
        display: flex;
        padding: 12px;
    }

    .typing-dot {
        width: 8px;
        height: 8px;
        background-color: #999;
        border-radius: 50%;
        margin: 0 2px;
        animation: typingAnimation 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(1) {
        animation-delay: 0s;
    }

    .typing-dot:nth-child(2) {
        animation-delay: 0.2s;
    }

    .typing-dot:nth-child(3) {
        animation-delay: 0.4s;
    }

    @keyframes typingAnimation {
        0%, 60%, 100% { transform: translateY(0); }
        30% { transform: translateY(-5px); }
    }

    /* ‡¶ï‡¶™‡¶ø ‡¶¨‡¶æ‡¶ü‡¶® */
    .copy-btn {
        background: #607d8b;
        color: white;
        border: none;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        cursor: pointer;
        margin-left: 8px;
        transition: all 0.3s;
    }

    .copy-btn:hover {
        background: #455a64;
    }

    /* ‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü‡¶∞ */
    #surah-selector-container {
        max-height: 250px;
        overflow-y: auto;
        padding: 10px;
        background: #f5f5f5;
        border-radius: 8px;
        margin: 10px 0;
    }

    #surah-selector {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 8px;
    }

    .surah-btn {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        text-align: center;
        padding: 8px 5px;
        font-size: 12px;
        background: #e0e0e0;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s;
    }

    .surah-btn:hover {
        background: #bdbdbd;
    }

    .surah-btn.active {
        background: var(--primary-color);
        color: white;
    }

    #load-more-btn {
        grid-column: 1 / -1;
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 10px;
        border-radius: 6px;
        cursor: pointer;
        margin-top: 8px;
    }

    #load-more-btn:hover {
        background: var(--dark-color);
    }

    /* ‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶∏‡ßá‡¶ï‡¶∂‡¶® */
    .feedback-section {
        margin-top: 15px;
        padding-top: 10px;
        border-top: 1px dashed #ddd;
    }
    
    .feedback-btn {
        background: #607d8b;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 12px;
        cursor: pointer;
        margin-right: 8px;
        transition: all 0.3s;
    }
    
    .feedback-btn:hover {
        background: #455a64;
    }
    
    .rating-container {
        display: inline-block;
        margin-left: 10px;
    }
    
    .rating-star {
        font-size: 16px;
        color: #ddd;
        cursor: pointer;
        transition: color 0.2s;
        margin-right: 2px;
    }
    
    .rating-star:hover,
    .rating-star.active {
        color: #ffc107;
    }
    
    .feedback-form {
        background: #f5f5f5;
        padding: 12px;
        border-radius: 8px;
        margin-top: 10px;
        display: none;
    }
    
    .form-group {
        margin-bottom: 10px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-size: 13px;
    }
    
    .form-group textarea {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-family: inherit;
        min-height: 60px;
        resize: vertical;
    }
    
    .form-actions {
        display: flex;
        gap: 8px;
        margin-top: 10px;
    }
    
    .form-actions button {
        flex: 1;
        padding: 8px;
        border-radius: 4px;
        cursor: pointer;
    }

    /* ‡¶ü‡¶æ‡¶á‡¶Æ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™ */
    .timestamp {
        font-size: 11px;
        color: #757575;
        text-align: right;
        margin-top: 4px;
    }

    /* ‡¶ü‡ßÅ‡¶≤‡¶ü‡¶ø‡¶™ */
    .tooltip {
        position: relative;
        display: inline-block;
    }

    .tooltip .tooltiptext {
        visibility: hidden;
        width: 120px;
        background-color: #555;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 5px;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 50%;
        margin-left: -60px;
        opacity: 0;
        transition: opacity 0.3s;
        font-size: 12px;
    }

    .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
    }

    /* ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶Æ‡ßá‡¶®‡ßÅ */
    .settings-menu {
        position: absolute;
        right: 10px;
        top: 10px;
        background: white;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
    }

    .settings-panel {
        display: none;
        position: absolute;
        right: 0;
        top: 40px;
        background: white;
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        width: 250px;
        z-index: 20;
    }

    .settings-panel h4 {
        margin-top: 0;
        margin-bottom: 15px;
        border-bottom: 1px solid #eee;
        padding-bottom: 8px;
    }

    .settings-group {
        margin-bottom: 15px;
    }

    .settings-group label {
        display: block;
        margin-bottom: 5px;
        font-size: 13px;
    }

    .font-size-control {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .font-size-control button {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        border: 1px solid #ddd;
        background: white;
        cursor: pointer;
    }

    .font-size-control button:hover {
        background: #f5f5f5;
    }

    .font-size-value {
        min-width: 30px;
        text-align: center;
    }

    .font-selector {
        width: 100%;
        padding: 8px;
        border-radius: 4px;
        border: 1px solid #ddd;
    }

    /* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶¨‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    #surah-selector-container::-webkit-scrollbar,
    #chatbot-body::-webkit-scrollbar {
        width: 6px;
    }

    #surah-selector-container::-webkit-scrollbar-track,
    #chatbot-body::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }

    #surah-selector-container::-webkit-scrollbar-thumb,
    #chatbot-body::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
    }

    #surah-selector-container::-webkit-scrollbar-thumb:hover,
    #chatbot-body::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

    /* ‡¶∞‡ßá‡¶∏‡ßç‡¶™‡¶®‡ßç‡¶∏‡¶ø‡¶≠ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
    @media only screen and (max-width: 600px) {
        #chatbot-container {
            width: 90%;
            right: 5%;
            left: 5%;
            bottom: 70px;
            max-height: 70vh;
        }
        
        #chatbot-body {
            height: 50vh;
        }
        
        #chatbot-input-container {
            padding: 8px;
        }
        
        #chatbot-input {
            width: 100%;
            margin-bottom: 8px;
        }
        
        #surah-selector {
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        }
        
        .surah-btn {
            font-size: 11px;
            padding: 6px 3px;
        }
        
        .quick-action-btn {
            min-width: 100px;
            padding: 8px;
            font-size: 12px;
        }
        
        .btn {
            padding: 10px 12px;
            font-size: 13px;
            margin-left: 5px;
            margin-bottom: 5px;
        }
    }
</style>

<button id="chatbot-toggle" class="tooltip" title="‡¶ï‡ßã‡¶∞‡¶Ü‡¶® ‡¶¨‡¶ü ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®">üìñ
    <div id="notification-badge" class="notification-badge">‡ßß</div>
</button>

<div id="chatbot-container">
    <div id="chatbot-header">
        <span class="bengali-text"> ‡¶Ü‡¶≤ ‡¶ï‡ßã‡¶∞‡¶Ü‡¶® ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶¨‡¶ü ‡¶ì ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ <small style="font-size:12px;">v2.2</small></span>
        <button id="close-chatbot" style="background:none; border:none; color:white; cursor:pointer; font-size:20px;">‚úï</button>
    </div>
    <div id="chatbot-body">
        <div class="message bot">
            <div style="display:flex; align-items:center; margin-bottom:8px;">
                <div style="width:36px;height:36px;background:var(--primary-color);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:10px;">‡¶ï</div>
                <div>
                    <strong>‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ</strong><br />
                    ‡¶ï‡ßã‡¶∞‡¶Ü‡¶®‡ßá‡¶∞ ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶¨‡¶æ ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®
                </div>
            </div>
            <div class="timestamp">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: <span id="current-date"></span></div>
        </div>
        <div class="quick-actions">
            <button class="quick-action-btn" id="about-bot-btn">‡¶¨‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá</button>
            <button class="quick-action-btn" id="usage-guide-btn">‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ</button>
            <button class="quick-action-btn" id="surah-list-btn">‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</button>
            <button class="quick-action-btn" id="feedback-btn">‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶¶‡¶ø‡¶®</button>
        </div>
        <div id="surah-selector-container" style="display:none;">
            <div style="text-align:center; margin-bottom:8px; font-weight:bold;">‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</div>
            <div class="surah-selector" id="surah-selector"></div>
        </div>
    </div>
    <div id="chatbot-input-container">
        <input type="text" id="chatbot-input" placeholder="‡¶∏‡ßÇ‡¶∞‡¶æ:‡¶Ü‡ßü‡¶æ‡¶§ ‡¶¨‡¶æ ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." class="bengali-text" />
        <button id="send-button" class="btn tooltip" title="‡¶™‡¶æ‡¶†‡¶æ‡¶®"><span>‚û§</span></button>
        <button id="tafsir-button" class="btn btn-accent tooltip" title="‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®">‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞</button>
        <button id="clear-button" class="btn btn-danger tooltip" title="‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®">üóëÔ∏è</button>
    </div>
</div>

<div id="fullscreen-tafsir">
    <div id="fullscreen-tafsir-content">
        <div id="fullscreen-tafsir-header">
            <div id="fullscreen-tafsir-title" class="bengali-text">‡¶á‡¶¨‡¶®‡ßá ‡¶ï‡¶æ‡¶∏‡¶ø‡¶∞‡ßá‡¶∞ ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞</div>
            <button id="exit-fullscreen" class="btn">‚úï ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
        <div id="fullscreen-tafsir-text" class="bengali-text"></div>
    </div>
</div>

<!-- Settings Button and Panel -->
<div class="settings-menu" id="settings-button">
    ‚öôÔ∏è
    <div class="settings-panel" id="settings-panel">
        <h4 class="bengali-text">‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h4>
        <div class="settings-group">
            <label class="bengali-text">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú</label>
            <div class="font-size-control">
                <button id="bengali-decrease">-</button>
                <span id="bengali-font-size-value" class="font-size-value">16px</span>
                <button id="bengali-increase">+</button>
            </div>
        </div>
        <div class="settings-group">
            <label class="bengali-text">‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú</label>
            <div class="font-size-control">
                <button id="arabic-decrease">-</button>
                <span id="arabic-font-size-value" class="font-size-value">22px</span>
                <button id="arabic-increase">+</button>
            </div>
        </div>
        <div class="settings-group">
            <label class="bengali-text">‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤</label>
            <select id="arabic-font-selector" class="font-selector bengali-text">
                <option value="'KFGQPC Uthmanic Script HAFS', 'Traditional Arabic', 'Arial Unicode MS', sans-serif">‡¶â‡¶∏‡¶Æ‡¶æ‡¶®‡ßÄ ‡¶π‡¶æ‡¶´‡¶∏</option>
                <option value="'Amiri', 'Traditional Arabic', 'Arial Unicode MS', sans-serif">‡¶Ü‡¶Æ‡¶ø‡¶∞‡¶ø</option>
                <option value="'Lateef', 'Traditional Arabic', 'Arial Unicode MS', sans-serif">‡¶≤‡¶§‡¶ø‡¶´</option>
                <option value="'Scheherazade', 'Traditional Arabic', 'Arial Unicode MS', sans-serif">‡¶∂‡ßá‡¶π‡ßá‡¶∞‡¶æ‡¶Ø‡¶æ‡¶¶‡¶ø</option>
            </select>
        </div>
        <button id="reset-settings" class="btn btn-secondary" style="width:100%; margin-top:10px;">‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</button>
    </div>
</div>

<script>
    // ‡¶°‡ßá‡¶ü‡¶æ ‡¶≠‡ßá‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤
    let quranData = [];
    let arabicData = [];
    let tafsirData = {};
    let currentAya = null;
    let isTyping = false;
    let currentSurahPage = 1;
    const surahsPerPage = 10;
    let selectedRating = 0;

    // ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function updateFontSettings() {
        // ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú
        document.documentElement.style.setProperty('--bengali-font-size', localStorage.getItem('bengaliFontSize') || '16px');
        document.getElementById('bengali-font-size-value').textContent = localStorage.getItem('bengaliFontSize') || '16px';
        
        // ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú
        document.documentElement.style.setProperty('--arabic-font-size', localStorage.getItem('arabicFontSize') || '22px');
        document.getElementById('arabic-font-size-value').textContent = localStorage.getItem('arabicFontSize') || '22px';
        
        // ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶´‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
        document.documentElement.style.setProperty('--arabic-font-family', localStorage.getItem('arabicFontFamily') || "'KFGQPC Uthmanic Script HAFS', 'Traditional Arabic', 'Arial Unicode MS', sans-serif");
        
        // ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶° ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
        const arabicFontSelector = document.getElementById('arabic-font-selector');
        if (arabicFontSelector) {
            arabicFontSelector.value = localStorage.getItem('arabicFontFamily') || "'KFGQPC Uthmanic Script HAFS', 'Traditional Arabic', 'Arial Unicode MS', sans-serif";
        }
    }

    // ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶®
    function showCurrentDate() {
        const now = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const dateStr = now.toLocaleDateString('bn-BD', options);
        document.getElementById('current-date').textContent = dateStr;
    }

    // ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶ï‡¶®‡¶≠‡¶æ‡¶∞‡ßç‡¶ü‡¶æ‡¶∞
    function convertNumbers(input) {
        const bnToEn = {'‡ß¶':'0','‡ßß':'1','‡ß®':'2','‡ß©':'3','‡ß™':'4','‡ß´':'5','‡ß¨':'6','‡ß≠':'7','‡ßÆ':'8','‡ßØ':'9'};
        const enToBn = {'0':'‡ß¶','1':'‡ßß','2':'‡ß®','3':'‡ß©','4':'‡ß™','5':'‡ß´','6':'‡ß¨','7':'‡ß≠','8':'‡ßÆ','9':'‡ßØ'};
        
        let output = input;
        // ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø
        for (const [bn, en] of Object.entries(bnToEn)) {
            output = output.replace(new RegExp(bn, 'g'), en);
        }
        return output;
    }

    // ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡ßü ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞
    function convertToBengaliNumerals(number) {
        const numerals = {'0':'‡ß¶','1':'‡ßß','2':'‡ß®','3':'‡ß©','4':'‡ß™',
                         '5':'‡ß´','6':'‡ß¨','7':'‡ß≠','8':'‡ßÆ','9':'‡ßØ'};
        return number.toString().split('').map(digit => numerals[digit] || digit).join('');
    }

    // ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
    async function fetchData() {
        try {
            showTypingIndicator();
            
            const [quranRes, arabicRes, tafsirRes] = await Promise.all([
                fetch("https://raw.githubusercontent.com/Akter-Molla/Quran-bot-bn/main/ayats_bn.json"),
                fetch("https://raw.githubusercontent.com/alQuranBD/Database/master/json/ayats_ar.json"),
                fetch("https://raw.githubusercontent.com/Akter-Molla/Quran-bot-bn/main/Tafseer_ibn_Kathir.json")
            ]);
            
            quranData = await quranRes.json();
            arabicData = await arabicRes.json();
            tafsirData = await tafsirRes.json();
            
            hideTypingIndicator();
            initChat();
            showCurrentDate();
            initSurahSelector();
            updateFontSettings();
        } catch (error) {
            console.error("‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø:", error);
            addBotMessage('‚ùå ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá', 'error');
        }
    }

    // ‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
    function showTypingIndicator() {
        isTyping = true;
        const chatBody = document.getElementById('chatbot-body');
        const typingDiv = document.createElement('div');
        typingDiv.className = 'typing-indicator';
        typingDiv.id = 'typing-indicator';
        typingDiv.innerHTML = `
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
        `;
        chatBody.appendChild(typingDiv);
        scrollChatToBottom();
    }

    // ‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®
    function hideTypingIndicator() {
        isTyping = false;
        const typingDiv = document.getElementById('typing-indicator');
        if (typingDiv) {
            typingDiv.remove();
        }
    }

    // ‡¶¨‡¶ü ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
    function addBotMessage(content, type = 'normal') {
        const chatBody = document.getElementById('chatbot-body');
        
        if (isTyping) {
            hideTypingIndicator();
        }
        
        const messageId = Date.now();
        const messageDiv = document.createElement('div');
        messageDiv.className = `message bot ${type}`;
        messageDiv.innerHTML = content + addFeedbackSection(messageId);
        messageDiv.id = `message-${messageId}`;
        chatBody.appendChild(messageDiv);
        scrollChatToBottom();
    }

    // ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
    function addUserMessage(content) {
        const chatBody = document.getElementById('chatbot-body');
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message user';
        messageDiv.textContent = content;
        chatBody.appendChild(messageDiv);
        scrollChatToBottom();
    }

    // ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶®‡¶ø‡¶ö‡ßá ‡¶®‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶®
    function scrollChatToBottom() {
        const chatBody = document.getElementById('chatbot-body');
        setTimeout(() => {
            chatBody.scrollTop = chatBody.scrollHeight;
        }, 100);
    }

    // ‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú
    function initSurahSelector() {
        const surahNames = [
            "‡¶Ü‡¶≤-‡¶´‡¶æ‡¶§‡¶ø‡¶π‡¶æ", "‡¶Ü‡¶≤-‡¶¨‡¶æ‡¶ï‡¶æ‡¶∞‡¶æ", "‡¶Ü‡¶≤-‡¶á‡¶Æ‡¶∞‡¶æ‡¶®", "‡¶Ü‡¶®-‡¶®‡¶ø‡¶∏‡¶æ", "‡¶Ü‡¶≤-‡¶Æ‡¶æ‡ßü‡¶ø‡¶¶‡¶æ",
            "‡¶Ü‡¶≤-‡¶Ü‡¶®'‡¶Ü‡¶Æ", "‡¶Ü‡¶≤-‡¶Ü'‡¶∞‡¶æ‡¶´", "‡¶Ü‡¶≤-‡¶Ü‡¶®‡¶´‡¶æ‡¶≤", "‡¶Ü‡¶§-‡¶§‡¶æ‡¶ì‡¶¨‡¶æ", "‡¶á‡¶â‡¶®‡ßÅ‡¶∏",
            "‡¶π‡ßÅ‡¶¶", "‡¶á‡¶â‡¶∏‡ßÅ‡¶´", "‡¶Ü‡¶∞-‡¶∞‡¶æ'‡¶¶", "‡¶á‡¶¨‡¶∞‡¶æ‡¶π‡ßÄ‡¶Æ", "‡¶Ü‡¶≤-‡¶π‡¶ø‡¶ú‡¶∞",
            "‡¶Ü‡¶®-‡¶®‡¶æ‡¶π‡¶≤", "‡¶Ü‡¶≤-‡¶á‡¶∏‡¶∞‡¶æ", "‡¶Ü‡¶≤-‡¶ï‡¶æ‡¶π‡¶´", "‡¶Æ‡¶æ‡¶∞‡¶á‡ßü‡¶æ‡¶Æ", "‡¶§‡ßç‡¶¨-‡¶π‡¶æ",
            "‡¶Ü‡¶≤-‡¶Ü‡¶Æ‡ßç‡¶¨‡¶ø‡ßü‡¶æ", "‡¶Ü‡¶≤-‡¶π‡¶æ‡¶ú‡ßç‡¶ú", "‡¶Ü‡¶≤-‡¶Æ‡ßÅ‡¶Æ‡¶ø‡¶®‡ßÅ‡¶®", "‡¶Ü‡¶®-‡¶®‡ßÇ‡¶∞", "‡¶Ü‡¶≤-‡¶´‡ßÅ‡¶∞‡¶ï‡¶æ‡¶®",
            "‡¶Ü‡¶∂-‡¶∂‡ßÅ'‡¶Ü‡¶∞‡¶æ", "‡¶Ü‡¶®-‡¶®‡¶æ‡¶Æ‡¶≤", "‡¶Ü‡¶≤-‡¶ï‡¶æ‡¶∏‡¶æ‡¶∏", "‡¶Ü‡¶≤-‡¶Ü‡¶®‡¶ï‡¶æ‡¶¨‡ßÅ‡¶§", "‡¶Ü‡¶∞-‡¶∞‡ßÇ‡¶Æ",
            "‡¶≤‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶®", "‡¶Ü‡¶∏-‡¶∏‡¶æ‡¶ú‡¶¶‡¶æ", "‡¶Ü‡¶≤-‡¶Ü‡¶π‡¶Ø‡¶æ‡¶¨", "‡¶∏‡¶æ‡¶¨‡¶æ", "‡¶´‡¶æ‡¶§‡¶ø‡¶∞",
            "‡¶á‡ßü‡¶æ‡¶∏‡ßÄ‡¶®", "‡¶Ü‡¶∏-‡¶∏‡¶æ‡¶´‡¶´‡¶æ‡¶§", "‡¶∏‡¶æ‡¶¶", "‡¶Ü‡¶Ø-‡¶Ø‡ßÅ‡¶Æ‡¶æ‡¶∞", "‡¶ó‡¶æ‡¶´‡¶ø‡¶∞",
            "‡¶´‡ßÅ‡¶∏‡¶∏‡¶ø‡¶≤‡¶æ‡¶§", "‡¶Ü‡¶∂-‡¶∂‡ßÇ‡¶∞‡¶æ", "‡¶Ü‡¶Ø-‡¶Ø‡ßÅ‡¶ñ‡¶∞‡ßÅ‡¶´", "‡¶Ü‡¶¶-‡¶¶‡ßÅ‡¶ñ‡¶æ‡¶®", "‡¶Ü‡¶≤-‡¶ú‡¶æ‡¶∏‡¶ø‡ßü‡¶æ",
            "‡¶Ü‡¶≤-‡¶Ü‡¶π‡¶ï‡¶æ‡¶´", "‡¶Æ‡ßÅ‡¶π‡¶æ‡¶Æ‡ßç‡¶Æ‡¶¶", "‡¶Ü‡¶≤-‡¶´‡¶æ‡¶§‡¶π", "‡¶Ü‡¶≤-‡¶π‡ßÅ‡¶ú‡ßÅ‡¶∞‡¶æ‡¶§", "‡¶ï‡ßç‡¶¨‡¶æ‡¶´",
            "‡¶Ü‡¶Ø-‡¶Ø‡¶æ‡¶∞‡¶ø‡ßü‡¶æ‡¶§", "‡¶Ü‡¶§-‡¶§‡ßÇ‡¶∞", "‡¶Ü‡¶®-‡¶®‡¶æ‡¶ú‡¶Æ", "‡¶Ü‡¶≤-‡¶ï‡¶æ‡¶Æ‡¶æ‡¶∞", "‡¶Ü‡¶∞-‡¶∞‡¶æ‡¶π‡¶Æ‡¶æ‡¶®",
            "‡¶Ü‡¶≤-‡¶ì‡ßü‡¶æ‡¶ï‡¶ø'‡¶Ü‡¶π", "‡¶Ü‡¶≤-‡¶π‡¶æ‡¶¶‡ßÄ‡¶¶", "‡¶Ü‡¶≤-‡¶Æ‡ßÅ‡¶ú‡¶æ‡¶¶‡¶æ‡¶≤‡¶æ‡¶π", "‡¶Ü‡¶≤-‡¶π‡¶æ‡¶∂‡¶∞", "‡¶Ü‡¶≤-‡¶Æ‡ßÅ‡¶Æ‡¶§‡¶æ‡¶π‡¶ø‡¶®‡¶æ",
            "‡¶Ü‡¶∏-‡¶∏‡¶æ‡¶´", "‡¶Ü‡¶≤-‡¶ú‡ßÅ‡¶Æ‡ßÅ'‡¶Ü‡¶π", "‡¶Ü‡¶≤-‡¶Æ‡ßÅ‡¶®‡¶æ‡¶´‡¶ø‡¶ï‡ßÅ‡¶®", "‡¶Ü‡¶§-‡¶§‡¶æ‡¶ó‡¶æ‡¶¨‡ßÅ‡¶®", "‡¶Ü‡¶§-‡¶§‡¶æ‡¶≤‡¶æ‡¶ï",
            "‡¶Ü‡¶§-‡¶§‡¶æ‡¶π‡¶∞‡ßÄ‡¶Æ", "‡¶Ü‡¶≤-‡¶Æ‡ßÅ‡¶≤‡¶ï", "‡¶Ü‡¶≤-‡¶ï‡¶æ‡¶≤‡¶æ‡¶Æ", "‡¶Ü‡¶≤-‡¶π‡¶æ‡¶ï‡ßç‡¶ï‡¶æ‡¶π", "‡¶Ü‡¶≤-‡¶Æ‡¶æ'‡¶Ü‡¶∞‡¶ø‡¶ú",
            "‡¶®‡ßÇ‡¶π", "‡¶Ü‡¶≤-‡¶ú‡¶ø‡¶®", "‡¶Ü‡¶≤-‡¶Æ‡ßÅ‡¶ú‡¶æ‡¶Æ‡ßç‡¶Æ‡¶ø‡¶≤", "‡¶Ü‡¶≤-‡¶Æ‡ßÅ‡¶¶‡ßç‡¶¶‡¶æ‡¶∏‡ßç‡¶∏‡¶ø‡¶∞", "‡¶Ü‡¶≤-‡¶ï‡¶ø‡ßü‡¶æ‡¶Æ‡¶æ‡¶π",
            "‡¶Ü‡¶≤-‡¶á‡¶®‡¶∏‡¶æ‡¶®", "‡¶Ü‡¶≤-‡¶Æ‡ßÅ‡¶∞‡¶∏‡¶æ‡¶≤‡¶æ‡¶§", "‡¶Ü‡¶®-‡¶®‡¶æ‡¶¨‡¶æ", "‡¶Ü‡¶®-‡¶®‡¶æ‡¶Ø‡¶ø'‡¶Ü‡¶§", "‡¶Ü‡¶¨‡¶æ‡¶∏‡¶æ",
            "‡¶Ü‡¶§-‡¶§‡¶æ‡¶ï‡¶≠‡ßÄ‡¶∞", "‡¶Ü‡¶≤-‡¶á‡¶®‡¶´‡¶ø‡¶§‡¶æ‡¶∞", "‡¶Ü‡¶≤-‡¶Æ‡ßÅ‡¶§‡¶æ‡¶´‡¶´‡¶ø‡¶´‡ßÄ‡¶®", "‡¶Ü‡¶≤-‡¶á‡¶®‡¶∂‡¶ø‡¶ï‡¶æ‡¶ï", "‡¶Ü‡¶≤-‡¶¨‡ßÅ‡¶∞‡ßÅ‡¶ú",
            "‡¶Ü‡¶§-‡¶§‡¶æ‡¶∞‡¶ø‡¶ï", "‡¶Ü‡¶≤-‡¶Ü'‡¶≤‡¶æ", "‡¶Ü‡¶≤-‡¶ó‡¶æ‡¶∂‡¶ø‡ßü‡¶æ", "‡¶Ü‡¶≤-‡¶´‡¶æ‡¶ú‡¶∞", "‡¶Ü‡¶≤-‡¶¨‡¶æ‡¶≤‡¶æ‡¶¶",
            "‡¶Ü‡¶∂-‡¶∂‡¶æ‡¶Æ‡¶∏", "‡¶Ü‡¶≤-‡¶≤‡¶æ‡¶á‡¶≤", "‡¶Ü‡¶¶-‡¶¶‡ßÅ‡¶π‡¶æ", "‡¶Ü‡¶≤-‡¶á‡¶®‡¶∂‡¶ø‡¶∞‡¶æ‡¶π", "‡¶Ü‡¶§-‡¶§‡ßÄ‡¶®",
            "‡¶Ü‡¶≤-‡¶Ü‡¶≤‡¶æ‡¶ï", "‡¶Ü‡¶≤-‡¶ï‡¶æ‡¶¶‡¶∞", "‡¶Ü‡¶≤-‡¶¨‡¶æ‡¶á‡ßü‡ßç‡¶Ø‡¶ø‡¶®‡¶æ‡¶π", "‡¶Ü‡¶Ø-‡¶Ø‡¶ø‡¶≤‡¶Ø‡¶æ‡¶≤", "‡¶Ü‡¶≤-‡¶Ü‡¶¶‡¶ø‡ßü‡¶æ‡¶§",
            "‡¶Ü‡¶≤-‡¶ï‡¶æ‡¶∞‡¶ø'‡¶Ü‡¶π", "‡¶Ü‡¶§-‡¶§‡¶æ‡¶ï‡¶æ‡¶∏‡ßÅ‡¶∞", "‡¶Ü‡¶≤-‡¶Ü‡¶∏‡¶∞", "‡¶Ü‡¶≤-‡¶π‡ßÅ‡¶Æ‡¶æ‡¶Ø‡¶æ‡¶π", "‡¶Ü‡¶≤-‡¶´‡ßÄ‡¶≤",
            "‡¶ï‡ßÅ‡¶∞‡¶æ‡¶á‡¶∂", "‡¶Ü‡¶≤-‡¶Æ‡¶æ‡¶â‡¶®", "‡¶Ü‡¶≤-‡¶ï‡¶æ‡¶â‡¶∏‡¶æ‡¶∞", "‡¶Ü‡¶≤-‡¶ï‡¶æ‡¶´‡¶ø‡¶∞‡ßÅ‡¶®", "‡¶Ü‡¶®-‡¶®‡¶æ‡¶∏‡¶∞",
            "‡¶Ü‡¶≤-‡¶Æ‡¶æ‡¶∏‡¶æ‡¶¶", "‡¶Ü‡¶≤-‡¶á‡¶ñ‡¶≤‡¶æ‡¶∏", "‡¶Ü‡¶≤-‡¶´‡¶æ‡¶≤‡¶æ‡¶ï", "‡¶Ü‡¶®-‡¶®‡¶æ‡¶∏"
        ];

        const container = document.getElementById('surah-selector');
        container.innerHTML = '';
        
        // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ‡¶∞ ‡¶∏‡ßÇ‡¶∞‡¶æ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
        const startIdx = (currentSurahPage - 1) * surahsPerPage;
        const endIdx = startIdx + surahsPerPage;
        const surahsToShow = surahNames.slice(startIdx, endIdx);

        surahsToShow.forEach((name, idx) => {
            const suraNum = startIdx + idx + 1;
            const btn = document.createElement('button');
            btn.className = 'surah-btn bengali-text';
            btn.title = name;
            btn.innerHTML = `${convertToBengaliNumerals(suraNum)}. ${name}`;
            
            if (window.innerWidth < 768) {
                btn.textContent = `${convertToBengaliNumerals(suraNum)}. ${name.split('-')[0]}`;
            }
            
            btn.onclick = () => {
                document.getElementById('chatbot-input').value = `${suraNum}:1`;
                document.getElementById('send-button').click();
                document.querySelectorAll('.surah-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            };
            container.appendChild(btn);
        });

        // "‡¶Ü‡¶∞‡ßã ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®" ‡¶¨‡¶æ‡¶ü‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶∞‡ßã ‡¶∏‡ßÇ‡¶∞‡¶æ ‡¶•‡¶æ‡¶ï‡ßá)
        if (endIdx < surahNames.length) {
            const loadMoreBtn = document.createElement('button');
            loadMoreBtn.id = 'load-more-btn';
            loadMoreBtn.className = 'bengali-text';
            loadMoreBtn.innerHTML = '‡¶Ü‡¶∞‡ßã ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® <span style="font-size:12px;">‚ñº</span>';
            loadMoreBtn.onclick = () => {
                currentSurahPage++;
                initSurahSelector();
                scrollChatToBottom();
            };
            container.appendChild(loadMoreBtn);
        }
    }

    // ‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶ü‡¶ó‡¶≤
    function toggleSurahList() {
        const container = document.getElementById('surah-selector-container');
        if (container.style.display === 'none') {
            currentSurahPage = 1;
            initSurahSelector();
            container.style.display = 'block';
        } else {
            container.style.display = 'none';
        }
    }

    // ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function searchQuran(query) {
        const normalizedQuery = convertNumbers(query);
        const suraAyaMatch = normalizedQuery.match(/^(\d+)[:\.\/,](\d+)$/);
        
        if (suraAyaMatch) {
            const [, sura, aya] = suraAyaMatch;
            const exactMatch = quranData.find(a => a.sura === sura && a.aya === aya);
            return exactMatch ? [exactMatch] : [];
        }
        
        const words = normalizedQuery.toLowerCase().split(/\s+/);
        return quranData.filter(aya => {
            const text = aya.text.toLowerCase();
            return words.some(word => text.includes(word));
        });
    }

    // ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶®
    function displayResults(results, query) {
        if (results.length === 0) {
            addBotMessage('‡¶ï‡ßã‡¶® ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø', 'error');
            return;
        }
        
        let resultHTML = `<strong>"${query}" ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ${results.length}‡¶ü‡¶ø ‡¶´‡¶≤‡¶æ‡¶´‡¶≤:</strong>`;
        addBotMessage(resultHTML);
        
        results.forEach(aya => {
            const arabic = arabicData.find(a => a.sura === aya.sura && a.VerseIDAr === aya.aya);
            
            resultHTML = `
                <div style="margin-bottom:8px;">
                    <strong>‡¶∏‡ßÇ‡¶∞‡¶æ ${convertToBengaliNumerals(aya.sura)}, ‡¶Ü‡ßü‡¶æ‡¶§ ${convertToBengaliNumerals(aya.aya)}:</strong>
                    <button class="copy-btn" onclick="copyFullAya('${aya.sura}', '${aya.aya}')">‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶™‡¶ø</button>
                </div>`;
            
            if (arabic?.ayat) {
                resultHTML += `<div class="arabic-ayat">${arabic.ayat}</div>`;
            }
            
            resultHTML += `
                <div style="margin-bottom:8px;" class="bengali-text">${aya.text}</div>
                <div style="display:flex; gap:8px; flex-wrap: wrap;">
                    <button onclick="showFullTafsir('${aya.sura}', '${aya.aya}')" 
                            style="flex:1; min-width: 120px; background:var(--accent-color); color:white; border:none; padding:8px; border-radius:6px; cursor:pointer;">
                        ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                    </button>
                    <button onclick="showNextAya('${aya.sura}', '${aya.aya}')" 
                            style="flex:1; min-width: 120px; background:var(--secondary-color); color:white; border:none; padding:8px; border-radius:6px; cursor:pointer;">
                        ‡¶™‡¶∞‡ßá‡¶∞ ‡¶Ü‡ßü‡¶æ‡¶§
                    </button>
                </div>
                <div class="timestamp">‡¶∏‡ßÇ‡¶∞‡¶æ ${convertToBengaliNumerals(aya.sura)}, ‡¶Ü‡ßü‡¶æ‡¶§ ${convertToBengaliNumerals(aya.aya)}</div>
            `;
            
            addBotMessage(resultHTML);
            currentAya = aya;
        });
    }

    // ‡¶™‡ßÅ‡¶∞‡ßã ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
    function copyFullAya(sura, aya) {
        const arabic = arabicData.find(a => a.sura === sura && a.VerseIDAr === aya);
        const bengali = quranData.find(a => a.sura === sura && a.aya === aya);
        
        let textToCopy = `‡¶∏‡ßÇ‡¶∞‡¶æ ${convertToBengaliNumerals(sura)}, ‡¶Ü‡ßü‡¶æ‡¶§ ${convertToBengaliNumerals(aya)}:\n\n`;
        if (arabic?.ayat) {
            textToCopy += `${arabic.ayat}\n\n`;
        }
        if (bengali?.text) {
            textToCopy += `${bengali.text}\n\n`;
        }
        
        navigator.clipboard.writeText(textToCopy).then(() => {
            const notification = document.createElement('div');
            notification.className = 'message bot success';
            notification.textContent = '‡¶™‡ßÅ‡¶∞‡ßã ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!';
            notification.style.animation = 'fadeIn 0.3s ease';
            document.getElementById('chatbot-body').appendChild(notification);
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
            scrollChatToBottom();
        });
    }

    // ‡¶™‡¶∞‡ßá‡¶∞ ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
    function showNextAya(sura, aya) {
        const nextAyaNum = parseInt(aya) + 1;
        const nextAya = quranData.find(a => a.sura === sura && a.aya === nextAyaNum.toString());
        
        if (nextAya) {
            document.getElementById('chatbot-input').value = `${sura}:${nextAyaNum}`;
            document.getElementById('send-button').click();
        } else {
            addBotMessage('‡¶è‡¶ü‡¶ø ‡¶è‡¶á ‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶Ü‡ßü‡¶æ‡¶§', 'info');
        }
    }

    // ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞
    function showFullTafsir(sura, aya) {
        const tafsirKey = `${sura}:${aya}`;
        const tafsir = tafsirData[tafsirKey];
        const arabic = arabicData.find(a => a.sura === sura && a.VerseIDAr === aya);
        const bengali = quranData.find(a => a.sura === sura && a.aya === aya);

        if (!tafsir?.text) {
            addBotMessage('‚ùå ‡¶è‡¶á ‡¶Ü‡ßü‡¶æ‡¶§‡ßá‡¶∞ ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø', 'error');
            return;
        }

        document.getElementById('fullscreen-tafsir-title').innerHTML = 
            `‡¶á‡¶¨‡¶®‡ßá ‡¶ï‡¶æ‡¶∏‡¶ø‡¶∞‡ßá‡¶∞ ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ - ‡¶∏‡ßÇ‡¶∞‡¶æ ${convertToBengaliNumerals(sura)}, ‡¶Ü‡ßü‡¶æ‡¶§ ${convertToBengaliNumerals(aya)}`;
        
        document.getElementById('fullscreen-tafsir-text').innerHTML = `
            ${arabic?.ayat ? `<div class="arabic-ayat">${arabic.ayat}</div>` : ''}
            ${bengali?.text ? `<div style="padding:12px; background:#e8f5e9; border-radius:8px; margin-bottom:12px;" class="bengali-text">${bengali.text}</div>` : ''}
            <div class="tafsir-container bengali-text">${tafsir.text}</div>
        `;
        
        document.getElementById('fullscreen-tafsir').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    // ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
    function showTafsir() {
        if (!currentAya) {
            const query = document.getElementById('chatbot-input').value.trim();
            const normalizedQuery = convertNumbers(query);
            const match = normalizedQuery.match(/^(\d+)[:\.\/,](\d+)$/);
            
            if (match) {
                currentAya = { sura: match[1], aya: match[2] };
            } else {
                addBotMessage('‚ö†Ô∏è ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®', 'warning');
                return;
            }
        }
        showFullTafsir(currentAya.sura, currentAya.aya);
    }

    // ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶¨‡¶®‡ßç‡¶ß
    function closeFullscreen() {
        document.getElementById('fullscreen-tafsir').style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    // ‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶∏‡ßá‡¶ï‡¶∂‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
    function addFeedbackSection(messageId) {
        return `
            <div class="feedback-section" id="feedback-${messageId}">
                <button class="feedback-btn" onclick="showFeedbackForm('${messageId}')">‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶¶‡¶ø‡¶®</button>
                <div class="rating-container">
                    <span class="rating-star" onclick="setRating('${messageId}', 1)">‚òÖ</span>
                    <span class="rating-star" onclick="setRating('${messageId}', 2)">‚òÖ</span>
                    <span class="rating-star" onclick="setRating('${messageId}', 3)">‚òÖ</span>
                    <span class="rating-star" onclick="setRating('${messageId}', 4)">‚òÖ</span>
                    <span class="rating-star" onclick="setRating('${messageId}', 5)">‚òÖ</span>
                </div>
                <div class="feedback-form" id="feedback-form-${messageId}">
                    <div class="form-group">
                        <label for="feedback-message-${messageId}">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡¶¨‡¶æ‡¶® ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§</label>
                        <textarea id="feedback-message-${messageId}" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button style="background: #4CAF50; color: white;" onclick="submitFeedback('${messageId}')">‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
                        <button style="background: #f44336; color: white;" onclick="hideFeedbackForm('${messageId}')">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
                    </div>
                </div>
            </div>
        `;
    }

    // ‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶´‡¶∞‡ßç‡¶Æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
    function showFeedbackForm(messageId) {
        document.getElementById(`feedback-form-${messageId}`).style.display = 'block';
    }

    // ‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶´‡¶∞‡ßç‡¶Æ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®
    function hideFeedbackForm(messageId) {
        document.getElementById(`feedback-form-${messageId}`).style.display = 'none';
    }

    // ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    function setRating(messageId, rating) {
        const stars = document.querySelectorAll(`#feedback-${messageId} .rating-star`);
        stars.forEach((star, index) => {
            if (index < rating) {
                star.classList.add('active');
                star.style.color = '#ffc107';
            } else {
                star.classList.remove('active');
                star.style.color = '#ddd';
            }
        });
        
        // ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
        const messageDiv = document.getElementById(`message-${messageId}`);
        messageDiv.dataset.rating = rating;
    }

    // ‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®
    function submitFeedback(messageId) {
        const messageDiv = document.getElementById(`message-${messageId}`);
        const feedbackText = document.getElementById(`feedback-message-${messageId}`).value.trim();
        const rating = messageDiv.dataset.rating || 0;
        
        if (!feedbackText) {
            alert('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®');
            return;
        }
        
        // ‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏
        console.log('Feedback submitted:', {
            messageId,
            rating,
            feedback: feedbackText,
            timestamp: new Date().toLocaleString('bn-BD')
        });
        
        // ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶¨‡¶ø‡¶ï‡¶≤‡ßç‡¶™ ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø
        const subject = `‡¶ï‡ßã‡¶∞‡¶Ü‡¶® ‡¶¨‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ (‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç: ${rating} ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞)`;
        const body = `‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶Ü‡¶á‡¶°‡¶ø: ${messageId}\n‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç: ${rating} ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞\n\n‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§:\n${feedbackText}\n\n‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ${new Date().toLocaleString('bn-BD')}`;
        
        // mailto ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ï‡ßç‡¶≤‡¶æ‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®
        window.location.href = `mailto:aktericclgstore@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        
        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∂‡¶® ‡¶¶‡¶ø‡¶®
        addBotMessage('‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶™‡ßá "‡¶∏‡ßá‡¶®‡ßç‡¶°" ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'success');
        hideFeedbackForm(messageId);
    }

    // ‡¶¨‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá
    function showAboutBot() {
        const aboutContent = `
            <div style="margin-bottom:12px;">
                <div style="display:flex; align-items:center; margin-bottom:12px;">
                    <div style="width:48px;height:48px;background:var(--primary-color);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:12px;font-size:24px;">‡¶ï</div>
                    <div>
                        <strong style="font-size:18px;">‡¶ï‡ßã‡¶∞‡¶Ü‡¶® ‡¶¨‡¶ü</strong><br>
                        <span style="font-size:14px;color:#666;">‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ü‡ßÅ‡¶≤</span>
                    </div>
                </div>
                
                <div style="margin-bottom:12px;">
                    <strong>‡¶∏‡¶Ç‡¶∏‡ßç‡¶ï‡¶∞‡¶£:</strong> 2.2<br>
                    <strong>‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞:</strong> ‡¶Ü‡¶ï‡ßç‡¶§‡¶æ‡¶∞‡ßÅ‡¶ú‡ßç‡¶ú‡¶æ‡¶Æ‡¶æ‡¶® ‡¶Æ‡ßã‡¶≤‡ßç‡¶≤‡¶æ<br>
                    <strong>‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï:</strong> <a href="https://www.facebook.com/akter.molla/" target="_blank" style="color:var(--secondary-color);">facebook.com/akter.molla</a><br>
                    <strong>‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü:</strong> <a href="https://aktermolla.blogspot.com/" target="_blank" style="color:var(--secondary-color);">aktermolla.blogspot.com</a>
                </div>
                
                <div style="background:#f5f5f5; padding:12px; border-radius:8px;">
                    <strong style="display:block; margin-bottom:8px;">‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø:</strong>
                    <ul style="margin:0; padding-left:20px;">
                        <li>‡¶ï‡ßã‡¶∞‡¶Ü‡¶®‡ßá‡¶∞ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶</li>
                        <li>‡¶Ü‡¶∞‡¶¨‡ßÄ ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶®</li>
                        <li>‡¶á‡¶¨‡¶®‡ßá ‡¶ï‡¶æ‡¶∏‡¶ø‡¶∞‡ßá‡¶∞ ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞</li>
                        <li>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ-‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶Æ‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</li>
                        <li>‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</li>
                        <li>‡¶Ü‡ßü‡¶æ‡¶§ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞‡¶ø‡¶Ç</li>
                        <li>‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶ì ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ</li>
                    </ul>
                <strong style="display:block; margin-bottom:8px;">‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶ú:</strong>
                     <ul style="margin:0; padding-left:20px;">
                        <li>‡¶Ü‡¶≤ ‡¶ï‡ßã‡¶∞‡¶Ü‡¶® ‡¶¨‡¶ø‡¶°‡¶ø</li>
                        <li>Quranic Universal Library</li>
                        <li>‡¶§‡¶æ‡¶´‡¶π‡ßÄ‡¶Æ‡ßÅ‡¶≤ ‡¶ï‡ßã‡¶∞‡¶Ü‡¶®</li>
                     </ul>
                </div>
            </div>
            <div class="timestamp">‡¶Ü‡¶™‡¶°‡ßá‡¶ü: ${new Date().toLocaleDateString('bn-BD')}</div>
        `;
        addBotMessage(aboutContent);
    }

    // ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ
    function showUsageGuide() {
        const guideContent = `
            <div style="margin-bottom:12px;">
                <strong style="display:block; margin-bottom:12px; font-size:16px;">‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ:</strong>
                
                <div style="background:#f5f5f5; padding:12px; border-radius:8px; margin-bottom:12px;">
                    <strong style="display:block; margin-bottom:8px;">‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶Ö‡¶™‡¶∂‡¶®:</strong>
                    <ul style="margin:0; padding-left:20px;">
                        <li><strong>‡¶∏‡ßÇ‡¶∞‡¶æ:‡¶Ü‡ßü‡¶æ‡¶§</strong> ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: 2:255 ‡¶¨‡¶æ ‡ß®.‡ß®‡ß´‡ß´ ‡¶¨‡¶æ ‡ß®/‡ß®‡ß´‡ß´)</li>
                        <li><strong>‡¶∂‡¶¨‡ßç‡¶¶</strong> ‡¶¶‡¶ø‡ßü‡ßá ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∞‡¶π‡¶Æ‡¶æ‡¶® ‡¶¨‡¶æ ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π)</li>
                        <li><strong>‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</strong> ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡ßÇ‡¶∞‡¶æ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    </ul>
                </div>
                
                <div style="background:#f5f5f5; padding:12px; border-radius:8px; margin-bottom:12px;">
                    <strong style="display:block; margin-bottom:8px;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶®:</strong>
                    <ul style="margin:0; padding-left:20px;">
                        <li><strong>‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞:</strong> ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                        <li><strong>‡¶™‡¶∞‡ßá‡¶∞ ‡¶Ü‡ßü‡¶æ‡¶§:</strong> ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞‡ßá‡¶∞ ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</li>
                        <li><strong>‡¶ï‡¶™‡¶ø:</strong> ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Ü‡ßü‡¶æ‡¶§ (‡¶Ü‡¶∞‡¶¨‡¶ø+‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ) ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                        <li><strong>‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞:</strong> ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                        <li><strong>‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§:</strong> ‡¶¨‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶¶‡¶ø‡¶®</li>
                    </ul>
                </div>
                
                <div style="background:#e3f2fd; padding:12px; border-radius:8px;">
                    <strong>‡¶ü‡¶ø‡¶™:</strong> ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶∏‡ßÇ‡¶∞‡¶æ:‡¶Ü‡ßü‡¶æ‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶è‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶™‡¶≤‡ßá‡¶ì ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶π‡¶¨‡ßá!
                </div>
            </div>
            <div class="timestamp">‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßá:aktermolla24@gmail.com</div>
        `;
        addBotMessage(guideContent);
    }

    // ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®
    function initChat() {
        // ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
        document.getElementById('chatbot-toggle').addEventListener('click', function() {
            const chatbot = document.getElementById('chatbot-container');
            chatbot.style.display = chatbot.style.display === 'none' ? 'flex' : 'none';
        });

        document.getElementById('close-chatbot').addEventListener('click', function() {
            document.getElementById('chatbot-container').style.display = 'none';
        });

        document.getElementById('send-button').addEventListener('click', function() {
            const query = document.getElementById('chatbot-input').value.trim();
            if (!query) return;
            
            addUserMessage(query);
            document.getElementById('chatbot-input').value = '';
            
            showTypingIndicator();
            setTimeout(() => {
                const results = searchQuran(query);
                displayResults(results, query);
            }, 500);
        });

        document.getElementById('chatbot-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('send-button').click();
            }
        });

        document.getElementById('clear-button').addEventListener('click', function() {
            document.getElementById('chatbot-body').innerHTML = `
                <div class="message bot">
                    <div style="display:flex; align-items:center; margin-bottom:8px;">
                        <div style="width:36px;height:36px;background:var(--primary-color);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:10px;">‡¶ï</div>
                        <div>
                            <strong>‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ</strong><br />
                            ‡¶ï‡ßã‡¶∞‡¶Ü‡¶®‡ßá‡¶∞ ‡¶Ü‡ßü‡¶æ‡¶§ ‡¶¨‡¶æ ‡¶§‡¶æ‡¶´‡¶∏‡ßÄ‡¶∞ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®
                        </div>
                    </div>
                    <div class="timestamp">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: <span id="current-date"></span></div>
                </div>
                <div class="quick-actions">
                    <button class="quick-action-btn" id="about-bot-btn">‡¶¨‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá</button>
                    <button class="quick-action-btn" id="usage-guide-btn">‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ</button>
                    <button class="quick-action-btn" id="surah-list-btn">‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</button>
                    <button class="quick-action-btn" id="feedback-btn">‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶¶‡¶ø‡¶®</button>
                </div>
                <div id="surah-selector-container" style="display:none;">
                    <div style="text-align:center; margin-bottom:8px; font-weight:bold;">‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</div>
                    <div class="surah-selector" id="surah-selector"></div>
                </div>`;
            
            showCurrentDate();
            currentSurahPage = 1;
            initSurahSelector();
            
            // ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡ßü ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ö
            document.getElementById('about-bot-btn').addEventListener('click', showAboutBot);
            document.getElementById('usage-guide-btn').addEventListener('click', showUsageGuide);
            document.getElementById('surah-list-btn').addEventListener('click', toggleSurahList);
            document.getElementById('feedback-btn').addEventListener('click', function() {
                addBotMessage(`
                    <div class="feedback-form">
                        <h4>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶¶‡¶ø‡¶®</h4>
                        <div class="form-group">
                            <label for="feedback-name">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
                            <input type="text" id="feedback-name" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
                        </div>
                        <div class="form-group">
                            <label for="feedback-email">‡¶á‡¶Æ‡ßá‡¶á‡¶≤ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
                            <input type="email" id="feedback-email" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ">
                        </div>
                        <div class="form-group">
                            <label>‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç</label>
                            <div class="rating-container">
                                <span class="rating-star" onclick="setRating(0, 1)">‚òÖ</span>
                                <span class="rating-star" onclick="setRating(0, 2)">‚òÖ</span>
                                <span class="rating-star" onclick="setRating(0, 3)">‚òÖ</span>
                                <span class="rating-star" onclick="setRating(0, 4)">‚òÖ</span>
                                <span class="rating-star" onclick="setRating(0, 5)">‚òÖ</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="feedback-message">‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§</label>
                            <textarea id="feedback-message" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡¶¨‡¶æ‡¶® ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                        </div>
                        <div style="display:flex; gap:8px;">
                            <button onclick="submitGeneralFeedback()" style="flex:1; background:var(--primary-color); color:white; border:none; padding:10px; border-radius:6px; cursor:pointer;">
                                ‡¶™‡¶æ‡¶†‡¶æ‡¶®
                            </button>
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="flex:1; background:#757575; color:white; border:none; padding:10px; border-radius:6px; cursor:pointer;">
                                ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                            </button>
                        </div>
                    </div>
                `);
            });
        });

        document.getElementById('tafsir-button').addEventListener('click', showTafsir);
        document.getElementById('exit-fullscreen').addEventListener('click', closeFullscreen);
        document.getElementById('about-bot-btn').addEventListener('click', showAboutBot);
        document.getElementById('usage-guide-btn').addEventListener('click', showUsageGuide);
        document.getElementById('surah-list-btn').addEventListener('click', toggleSurahList);

        // ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤
        document.getElementById('settings-button').addEventListener('click', function(e) {
            e.stopPropagation();
            const panel = document.getElementById('settings-panel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
        });

        // ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤
        document.getElementById('bengali-increase').addEventListener('click', function() {
            let currentSize = parseInt(localStorage.getItem('bengaliFontSize') || 16);
            if (currentSize < 24) {
                currentSize += 1;
                localStorage.setItem('bengaliFontSize', `${currentSize}px`);
                updateFontSettings();
            }
        });

        document.getElementById('bengali-decrease').addEventListener('click', function() {
            let currentSize = parseInt(localStorage.getItem('bengaliFontSize') || 16);
            if (currentSize > 12) {
                currentSize -= 1;
                localStorage.setItem('bengaliFontSize', `${currentSize}px`);
                updateFontSettings();
            }
        });

        // ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤
        document.getElementById('arabic-increase').addEventListener('click', function() {
            let currentSize = parseInt(localStorage.getItem('arabicFontSize') || 22);
            if (currentSize < 32) {
                currentSize += 1;
                localStorage.setItem('arabicFontSize', `${currentSize}px`);
                updateFontSettings();
            }
        });

        document.getElementById('arabic-decrease').addEventListener('click', function() {
            let currentSize = parseInt(localStorage.getItem('arabicFontSize') || 22);
            if (currentSize > 16) {
                currentSize -= 1;
                localStorage.setItem('arabicFontSize', `${currentSize}px`);
                updateFontSettings();
            }
        });

        // ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶´‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
        document.getElementById('arabic-font-selector').addEventListener('change', function() {
            localStorage.setItem('arabicFontFamily', this.value);
            updateFontSettings();
        });

        // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
        document.getElementById('reset-settings').addEventListener('click', function() {
            localStorage.removeItem('bengaliFontSize');
            localStorage.removeItem('arabicFontSize');
            localStorage.removeItem('arabicFontFamily');
            updateFontSettings();
        });

        // ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶¨‡¶®‡ßç‡¶ß
        document.addEventListener('click', function() {
            document.getElementById('settings-panel').style.display = 'none';
        });
    }

    // ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®
    function submitGeneralFeedback() {
        const name = document.getElementById('feedback-name')?.value.trim() || 'Anonymous';
        const email = document.getElementById('feedback-email')?.value.trim() || 'N/A';
        const message = document.getElementById('feedback-message')?.value.trim();
        
        if (!message) {
            alert('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®');
            return;
        }
        
        console.log('General Feedback:', {
            name,
            email,
            message,
            timestamp: new Date().toLocaleString('bn-BD')
        });
        
        addBotMessage('‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§', 'success');
    }

    // ‡¶°‡¶ï‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡ßá‡¶°‡¶ø ‡¶π‡¶≤‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ
    document.addEventListener('DOMContentLoaded', function() {
        // ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶´‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)
        const link = document.createElement('link');
        link.href = 'https://fonts.maateen.me/solaiman-lipi/font.css';
        link.rel = 'stylesheet';
        document.head.appendChild(link);
        
        // ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶´‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)
        const arabicFont = document.createElement('link');
        arabicFont.href = 'https://fonts.googleapis.com/earlyaccess/amiri.css';
        arabicFont.rel = 'stylesheet';
        document.head.appendChild(arabicFont);
        
        // ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶´‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶°
        const lateefFont = document.createElement('link');
        lateefFont.href = 'https://fonts.googleapis.com/earlyaccess/lateef.css';
        lateefFont.rel = 'stylesheet';
        document.head.appendChild(lateefFont);
        
        const scheherazadeFont = document.createElement('link');
        scheherazadeFont.href = 'https://fonts.googleapis.com/earlyaccess/scheherazade.css';
        scheherazadeFont.rel = 'stylesheet';
        document.head.appendChild(scheherazadeFont);
        
        // ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
        fetchData();
    });

    // ‡¶°‡¶ï‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡ßá‡¶°‡¶ø ‡¶π‡¶≤‡ßá ‡¶®‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    document.addEventListener('DOMContentLoaded', function() {
        // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
        const hasOpened = localStorage.getItem('chatOpened');
        const notificationBadge = document.getElementById('notification-badge');
        
        if (!hasOpened) {
            notificationBadge.style.display = 'flex';
        }

        // ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶ü‡¶ó‡¶≤ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá ‡¶®‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        document.getElementById('chatbot-toggle').addEventListener('click', function() {
            const chatbot = document.getElementById('chatbot-container');
            if (chatbot.style.display === 'none') {
                localStorage.setItem('chatOpened', 'true');
                notificationBadge.style.display = 'none';
            }
        });

        // ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶°‡¶ø‡¶ü‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® (24 ‡¶ò‡¶®‡ßç‡¶ü‡¶æ ‡¶™‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá)
        const firstVisit = !localStorage.getItem('lastVisit');
        const lastVisitTime = localStorage.getItem('lastVisit');
        const oneDay = 24 * 60 * 60 * 1000;

        if (firstVisit || (Date.now() - lastVisitTime > oneDay)) {
            notificationBadge.style.display = 'flex';
            localStorage.setItem('lastVisit', Date.now());
        }
    });

    // ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    window.copyFullAya = copyFullAya;
    window.showFullTafsir = showFullTafsir;
    window.showNextAya = showNextAya;
    window.setRating = setRating;
    window.submitFeedback = submitFeedback;
    window.hideFeedbackForm = hideFeedbackForm;
    window.showFeedbackForm = showFeedbackForm;
</script>